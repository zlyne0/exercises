<!DOCTYPE html>
<html lang="en">
<head>
	<title>product parameters</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<script src="js/angular.min.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>		
</head>
	
<body>

<div ng-app="productParametersApp" ng-controller="productParametersController">

	Products:
	<table class="table table-striped table-bordered table-condensed">
		<thead>
			<tr>
				<th>Id</th>
				<th>Name</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="product in products" ng-click="setSelectedProduct(product.id)" ng-class="{info: product.id === selectedProductId}">
				<td>{{ product.id }}</td>
				<td>{{ product.name }}</td>
			</tr>
		</tbody>
	</table>
	selected: {{ selectedProductId }}
	
	<div>
		<table>
			<thead>
				<tr>
					<th>Id</th>
					<th>Name</th>
					<th>Value</th>
					<th>big value</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="param in productParameters">
					<td>{{ param.id }}</td>
					<td>{{ param.type.name }}</td>
					<td>{{ param.value }}</td>
					<td>{{ param.bigValue }}</td>
				</tr>
			</tbody>
		</table>
	</div>
	
</div>
	
<script charset="UTF-8">
function loadProductsList($scope, $http) {
	$scope.selectedProductId = null;
	$scope.productParameters = [];
	
	$http.get("rest/product/list").then(function(response) {
		$scope.products = response.data;
	});
}

var app = angular.module('productParametersApp', []);
app.controller('productParametersController', function($scope, $http) {
//	$scope.saveNewAd = function() {
//		createNewAd($scope, $http);
//	};
	
	loadProductsList($scope, $http);
	
	$scope.setSelectedProduct = function(productId) {
		$scope.selectedProductId = productId;
		
		$http.get("rest/product/" + productId + "/parameters").then(function(response) {
			$scope.productParameters = response.data;
		});
	}
});
</script>
	
</body>

</html>